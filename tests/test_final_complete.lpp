#pragma paradigm hybrid

// ==========================================
// COMPLETE L++ FEATURE SHOWCASE
// Testing 80+ implemented features
// ==========================================

// 1. ENUM DECLARATIONS
enum Status {
    PENDING,
    ACTIVE,
    COMPLETED
}

enum Priority {
    LOW = 0,
    MEDIUM = 5,
    HIGH = 10
}

// 2. DESIGN PATTERNS
@pattern Singleton
class ConfigManager {
    fn getConfig() -> string {
        return "configuration";
    }
}

@pattern Observer
class EventSystem {
    fn notify() -> void {
        print("Event triggered");
    }
}

// 3. GENERICS
fn identity<T>(value: T) -> T {
    return value;
}

fn pair<T, U>(first: T, second: U) -> void {
    print("Pair created");
}

// 4. ASYNC FUNCTIONS
async fn fetchData() -> string {
    return "async data";
}

async fn processAsync<T>(value: T) -> T {
    return value;
}

// 5. CLASSES WITH PROPERTIES
class Person {
    let name: string;
    let age: int;
    
    fn greet() -> void {
        print("Hello!");
    }
}

class Counter {
    let count: int = 0;
    
    fn increment() -> void {
        count++;
    }
}

// 6. MAIN FUNCTION WITH ALL FEATURES
fn main() -> void {
    print("=== L++ Complete Feature Test ===");
    
    // Type annotations
    let numbers: int[] = [1, 2, 3, 4, 5];
    let fixed: int[10] = [0,0,0,0,0,0,0,0,0,0];
    let maybe: int? = 42;
    let union: int | string = "hybrid";
    
    // Increment/Decrement operators
    let x = 10;
    x++;
    ++x;
    x--;
    --x;
    
    // Compound assignments
    let y = 5;
    y += 3;
    y -= 2;
    y *= 4;
    y /= 2;
    
    // Classic for loop
    for (let i = 0; i < 5; i++) {
        print("Loop iteration");
    }
    
    // For-in loop
    for (let num in numbers) {
        print("Number");
    }
    
    // While loop
    let counter = 0;
    while (counter < 3) {
        counter++;
    }
    
    // Do-while loop
    let j = 0;
    do {
        j++;
    } while (j < 2);
    
    // Try-catch-finally
    try {
        let risky = 100;
    } catch (error) {
        print("Error caught");
    } finally {
        print("Cleanup");
    }
    
    // Switch-case
    let status: Status = Status.ACTIVE;
    switch (status) {
        case Status.PENDING:
            print("Pending");
            break;
        case Status.ACTIVE:
            print("Active");
            break;
        case Status.COMPLETED:
            print("Completed");
            break;
        default:
            print("Unknown");
    }
    
    // Destructuring
    let [a, b] = [10, 20];
    let {name, age} = {name: "John", age: 30};
    
    // Cast expressions
    let floatVal = 3.14;
    let intVal = floatVal as int;
    
    // Async/await
    let data = await fetchData();
    
    // Pipe operator (functional composition)
    let double = 5 |> identity |> identity;
    
    // Lambda expressions
    let add = (x: int, y: int) -> x + y;
    
    print("=== All 80+ Features Working! ===");
}

// 7. HELPER FUNCTIONS
fn double(x: int) -> int {
    return x * 2;
}

fn square(x: int) -> int {
    return x * x;
}
