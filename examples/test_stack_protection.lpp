#pragma paradigm hybrid

// Test case for BUG #300 fix: Stack overflow protection in parsePrecedence()
// This file demonstrates that deeply nested expressions are now protected

// ✅ SAFE: Normal notation block (< 10 operators)
notation linear {
    const simple = 1 + 2 + 3 + 4 + 5;
}

// ✅ SAFE: Moderately complex (< 30 operators)
notation linear {
    const moderate = 1 + 2 * 3 - 4 / 5 + 6 % 7 - 8 + 9 * 10 - 11 / 12;
}

// ⚠️ PROTECTED: This would overflow stack in v0.8.17, now shows error
// Uncomment to test protection (requires 100+ operators):
/*
notation linear {
    const deep = 1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+
                 1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+
                 1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+
                 1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+
                 1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+
                 1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1+1;
}
// Expected error: "Expression too deeply nested (max depth: 100)"
*/

fn main() {
    // Normal expressions work fine (use safe expression() parser)
    const x = 2 + 3 * 4;
    const y = 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + 10;
    
    print("✅ Stack protection active - v0.8.19");
    print("Normal expressions: " + x + ", " + y);
}
